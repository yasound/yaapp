{% extends "base.html" %}
{% load i18n %}
{% load thumbnail %}
{% load compressed %}
{% load straight_include %}

{% block extra_head %}
    {% block fb_open_graph %}{% endblock %}
    
    <link rel="image_src" href="/media/yaweb/images/logo.png" />
        
    <script type="text/javascript" src="{% url django.views.i18n.javascript_catalog %}"></script>
    <link rel="stylesheet" href="/media/css/flashblock.css"/>
    <link rel="stylesheet" href="/media/css/webapp.css"/>
    <link rel="stylesheet" href="/media/css/auth-buttons.css"/>
    
    <script type="text/javascript" src='/media/js/jquery-1.7.1.min.js'></script>
    <script type="text/javascript" src='/media/js/jquery.timers.js'></script>
    <script type="text/javascript" src='/media/js/moment.min.js'></script>
    <script type="text/javascript" src='/media/js/moment-lang-all.min.js'></script>
    <script type="text/javascript" src='/media/js/sm/soundmanager2-nodebug-jsmin.js'></script>
    <script type="text/javascript" src='/media/js/json2.js'></script>
    <script type="text/javascript" src='/media/js/mustache-django-friendly.js'></script>
    <script type="text/javascript" src='/media/js/ICanHaz-no-mustache.min.js'></script>
    <script type="text/javascript" src='/media/js/underscore-1.3.1.js'></script>
    <script type="text/javascript" src='/media/js/backbone-min.js'></script>
    <script type="text/javascript" src='/media/js/backbone-tastypie.js'></script>
    <script type="text/javascript" src='/media/js/backbone.paginator.js'></script>
    <script type="text/javascript" src='/media/bootstrap/js/bootstrap.min.js'></script>
    <script type="text/javascript" src='/media/js/socket.io.js'></script>
    <script type="text/javascript" src='/media/js/pubsub.js'></script>
    <script type="text/javascript" src='/media/js/Namespace.js'></script>

    
    {% compressed_js 'webapp-all' %}
    <script type="text/javascript">
       moment.lang('{{request.LANGUAGE_CODE}}');
       var g_authenticated = {% if request.user.is_authenticated %}1{% else %}0{% endif %};
       var g_username = '{% if request.user.is_authenticated %}{{request.user.username}}{% endif %}';
       var g_push_url = '{{ push_url }}';
       var g_enable_push = {% if enable_push %}true{% else %}false{% endif %};
       var g_facebook_share_picture = '{{ facebook_share_picture}}';
       var g_facebook_share_link = '{{ facebook_share_link}}';
    </script>


   <script type="text/html" id="radioTemplate">
      {% include "yabase/app/radio/radio.mustache" %}
   </script>

   <script type="text/html" id="trackTemplate">
      {% include "yabase/app/track.mustache" %}
   </script>

   <script type='text/html' id='profilePageTemplate'>
     {% include "yabase/app/profile/profilePage.mustache" %}
   </script>
   <script type='text/html' id='userTemplate'>
     {% include "yabase/app/profile/user.mustache" %}
   </script>

   <script type='text/html' id='radioPageTemplate'>
     {% include "yabase/app/radio/radioPage.mustache" %}
   </script>

   <script type="text/html" id="wallEventTemplateMessage">
      {% include "yabase/app/radio/wallEvent.message.mustache" %}
   </script>
   <script type="text/html" id="wallEventTemplateLike">
      {% include "yabase/app/radio/wallEvent.like.mustache" %}
   </script>
   <script type="text/html" id="wallEventTemplateSong">
      {% include "yabase/app/radio/wallEvent.song.mustache" %}
   </script>
   
   <script type="text/html" id="radioUserTemplate">
      {% include "yabase/app/radio/radioUser.mustache" %}
   </script>
   
   <script type='text/html' id='paginationTemplate'>
     {% include "yabase/app/pagination.mustache" %}
   </script>

   
   <script type='text/html' id='radioCellTemplate'>
     {% include "yabase/app/radioCell.mustache" %}
   </script>

   <script type='text/html' id='userCellTemplate'>
     {% include "yabase/app/userCell.mustache" %}
   </script>

   <script type='text/html' id='searchPageTemplate'>
     {% include "yabase/app/searchPage.mustache" %}
   </script>

   <script type='text/html' id='homePageTemplate'>
     {% include "yabase/app/home/homePage.mustache" %}
   </script>

{% if request.user.is_authenticated %}
   <script type='text/html' id='favoritesPageTemplate'>
     {% include "yabase/app/favoritesPage.mustache" %}
   </script>

   <script type='text/html' id='friendsPageTemplate'>
     {% include "yabase/app/friends/friendsPage.mustache" %}
   </script>

   <script type="text/html" id="wallInputTemplate">
      {% include "yabase/app/radio/wallInput.mustache" %}
   </script>

   <script type="text/html" id="settingsPageTemplate">
      {% include "yabase/app/settings/settingsPage.mustache" %}
   </script>
{% endif %}

{% endblock %}
{% block head_title %}{% trans "Yasound" %}{% endblock %}
{% block body %}

<div id="fb-root"></div>
<script>
/*   window.fbAsyncInit = function() {
    FB.init({
      appId      : '{{ facebook_app_id }}', // App ID
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML
    });

    // Additional initialization code here
  };

  // Load the SDK Asynchronously
  (function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
   }(document));
 */</script>



    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a href='{% url webapp %}' id='btn-webapp' class='brand'><img src='/media/images/logo.png' alt='Yasound logo'/></a>
          
          <div class="nav-collapse">
            <div class='pull-right'>
                <div class="btn-group " id='user-menu'>            
                {% if request.user.is_authenticated %}
                        <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
                        <i class="icon-user"></i>
                            {{ request.user.userprofile }} 
                        <span class="caret"></span> </a>
						<ul class="dropdown-menu">
							<li><a href="{% url webapp_radio user_uuid %}" id='btn-my-radio' yasound:uuid='{{ user_uuid }}'>{% trans "My radio" %}</a></li>
							<li><a href="{% url webapp_favorites %}" id='btn-favorites'>{% trans "My favorites" %}</a></li>
							<li><a href="{% url webapp_friends %}" id='btn-friends'>{% trans "My friends" %}</a></li>
							{% if request.user.is_authenticated %}
	                        <li class="divider"></li>
                            <li><a href="{% url webapp_profile request.user.username %}" id='btn-my-profile'>{% trans "My profile" %}</a></li>
                            <li><a href="{% url webapp_settings %}" id='btn-settings'>{% trans "Settings" %}</a></li>
                            {% endif %}
                            <li class="divider"></li>
    						<li><a href="{% url logout %}">{% trans "Logout" %}</a></li>
						</ul>
                {% else %}
                        <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
                        <i class="icon-user"></i>
                            {% trans "Not logged" %}
                        <span class="caret"></span> </a>
                {% endif %}
                </div>       
                <div>         
                    <form class="navbar-search pull-right" action="" id='tbar-search'>
                    <input class="search-query span2" type="text" id='search-input' placeholder="{% trans 'Search' %}">
                    </form>
                </div>    
            </div>
          </div><!--/.nav-collapse -->
            <div id='webapp-player'>
            </div>
            <div class='nav-collapse'>
				<!-- AddThis Button BEGIN -->
				<div class="addthis_toolbox addthis_default_style ">
				<a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
				<a class="addthis_button_google_plusone" g:plusone:size="medium"></a>
				<a class="addthis_counter addthis_pill_style"></a>
				</div>
<!-- 				<script type="text/javascript">var addthis_config = {"data_track_addressbar":true};</script>
				<script type="text/javascript" src="https://s7.addthis.com/js/250/addthis_widget.js#pubid=ra-4f910520446e8625"></script>
 -->				<!-- AddThis Button END -->
            
            </div>
        </div>
      </div>
    </div>
    
<div class='container-fluid' id='webapp-content'>{% block content%}{%endblock%}
</div>
<div class='container-fluid'>
    <hr>
    <footer>
    <p>&copy; Yasound 2012</p>
    </footer>
</div>

{% endblock %}

